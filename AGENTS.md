# **AGENTS.md**

## **必ず遵守**

* **状態ファイルの活用**: すべての作業はトップtディレクトリ直下の `state.md` に記載されたタスク状態を基準にします。新しい作業を始める前に state.md を読み込み、作業完了後は state.md のチェックボックスを更新してください。このファイルはタスクの進捗や残タスクを管理するための唯一の情報源です。  
* **チェックボックス形式のタスク管理**: プロジェクトのタスクはチェックボックス付きリストで管理します。エージェントはタスクの一覧から一つを選び、完了したらチェックを付けることでメタ認知を高めます。  
* **単一ファイル・単一作業の原則**: 一度に操作するのは1ファイルのみ、作業内容は1種類（コーディング、リファクタリング、レビューなど）に限定します。複数ファイルや複数種類の作業をまとめて行わないでください。必要な場合はユーザーからの明示的指示を待ちます。  
* **テスト駆動開発**: 生成するコードは必ずテストを通過させることを目標とします。テストが失敗した場合は修正を繰り返し、すべてのテストが成功するまで次のタスクに進みません。  
* **ドキュメント整備と更新**: コマンドや手順を明確に記述し、コード生成や検証に必要な情報を常に最新に保ちます。

## **タスクフロー**

* **1\. 状態確認**: `state.md` のチェックリストから未完了のタスクを一つ選択します。  
* **2\. 環境セットアップ**: 必要に応じて依存関係をインストールし、開発サーバーやビルド環境を準備します（下記参照）。  
* **3\. テスト実行**: 現在の状態でテストを実行し、失敗しているテストを把握します。  
* **4\. 作業実施**: 選択したタスクを、単一ファイル・単一作業の原則に従って実施します。作業内容が完了したらローカルでテストを再度実行し、すべてのテストが成功することを確認します。  
* **5\. state.md 更新**: 作業が完了したら対象タスクのチェックボックスをオンにし、必要に応じて次に着手すべきタスクを追記します。  
* **6\. 次のタスクへ移動**: 残タスクがあれば手順1に戻り、なければ作業を終了します。

## **セキュリティと環境**

* 環境変数やシークレットは `.env` ファイル等で管理し、公開しないように注意してください。  
* 外部サービスへのアクセスや API キーの設定方法を明記し、不用意なアクセスを避けます。  
* ネットワークアクセスやファイル操作など、エージェントが避けるべき行為や制限事項をこのセクションに記述します。

